$(document).ready(function(){var l=Date.now(),h={},b=new Date,g=!1;2018===b.getFullYear()&&9===b.getMonth()&&22===b.getDate()&&(g=!0);var m=document.getElementsByClassName("raceContainer"),q=function(a){l+=1;var b="table-"+l,f=a.getAttribute("data-race"),d=h.races[f],c=a.classList.contains("raceContainer--school"),e=d.positionsAvailable===d.results.length,g=e||d.pollsTotal===d.pollsReporting,f='<figcaption class="card-body py-2" role="presentation"><h2 class="card-title text-center mb-0 '+(c?"h6":
"h5")+'" id="'+b+'_label"'+("cspgno"===f||"cscno"===f?' lang="fr"':"")+">"+d.raceTitle+"</h2></figcaption>",f=d.isDown?f+'<div class="card-body" role="alert"><div class="alert alert-warning text-center"><strong>Results Unavailable</strong><br />Please stand by.</div></div>':f+('<table class="table table-sm table-hover mb-0" aria-labelledby="'+b+'_label" aria-describedby="'+b+'_polls"><thead><th>Candidate</th><th class="text-right">Votes</th></thead><tbody>'+d.results.reduce(function(a,b,c){return a+
"<tr"+(e||g&&c<d.positionsAvailable?' class="table-success"':"")+"><td>"+b.candidate+'</td><td class="text-right">'+(e?"<em>Acclaimed</em>":b.votes)+"</td></tr>"},"")+"</tbody></table>"+(e?"":'<div class="card-footer py-1 text-center" id="'+b+'_polls"><small class="text-secondary">'+d.pollsReporting+" of "+d.pollsTotal+" polls reporting</small></div>"));a.innerHTML=f},b=function(){$.get("resultsJSON.asp",{},"json").done(function(a){h=a;document.getElementById("lastUpdated").innerHTML="Last Updated<br />"+
h.lastUpdated+(g?'<br /><em class="text-muted">(Refreshing automatically)</em>':"");document.getElementById("progress-bar--votersHeardFrom").style.width=(a.votersHeardFrom/a.votersTotal*100).toString()+"%";document.getElementById("progress--votersHeardFrom").innerText=a.votersHeardFrom;document.getElementById("progress--votersTotal").innerText=a.votersTotal;var b=a.races.mayor.pollsReporting+a.races.ward1.pollsReporting+a.races.ward2.pollsReporting+a.races.ward3.pollsReporting+a.races.ward4.pollsReporting+
a.races.ward5.pollsReporting+a.races.adsb_ward2.pollsReporting+a.races.adsb_ward3.pollsReporting+a.races.adsb_ward4.pollsReporting+a.races.adsb_ward5.pollsReporting+a.races.adsb_unorganized.pollsReporting+a.races.hscdsb.pollsReporting+a.races.cspgno.pollsReporting;a=a.races.mayor.pollsTotal+a.races.ward1.pollsTotal+a.races.ward2.pollsTotal+a.races.ward3.pollsTotal+a.races.ward4.pollsTotal+a.races.ward5.pollsTotal+a.races.adsb_ward2.pollsTotal+a.races.adsb_ward3.pollsTotal+a.races.adsb_ward4.pollsTotal+
a.races.adsb_ward5.pollsTotal+a.races.adsb_unorganized.pollsTotal+a.races.hscdsb.pollsTotal+a.races.cspgno.pollsTotal;document.getElementById("progress-bar--pollsReporting_sum").style.width=(b/a*100).toString()+"%";for(b=0;b<m.length;b+=1)q(m[b])}).fail(function(){try{window.alert("An error occurred retrieving the results.")}catch(a){}})};document.getElementById("siteContainer").style.display="block";b();g&&window.setInterval(b,61E3);var k=document.getElementById("tabsContainer--toggleBtn"),c=document.getElementById("tabsContainer"),
n=function(){c.classList.add("d-none");k.setAttribute("aria-expanded","false")},p=function(){var a=c.getElementsByClassName("active")[0].getAttribute("data-next-tab");document.getElementById(a).click()};k.addEventListener("click",function(){c.classList.contains("d-none")?(c.classList.remove("d-none"),k.setAttribute("aria-expanded","true")):n()});$("a[data-toggle='tab']",c).on("shown.bs.tab",n);for(var e=document.getElementsByClassName("tabsContainer--prevBtn"),b=0;b<e.length;b+=1)e[b].addEventListener("click",
function(){var a=c.getElementsByClassName("active")[0].id;c.querySelector("a[data-next-tab='"+a+"']").click()});e=document.getElementsByClassName("tabsContainer--nextBtn");for(b=0;b<e.length;b+=1)e[b].addEventListener("click",p);var r=document.getElementById("option-autoTab");window.setInterval(function(){r.checked&&p()},45E3)});
