$(document).ready(function(){var l=Date.now(),h={},b=new Date,g=!1;2018===b.getFullYear()&&9===b.getMonth()&&22===b.getDate()&&(g=!0);var m=document.getElementsByClassName("raceContainer"),q=function(a){l+=1;var f="table-"+l,b=a.getAttribute("data-race"),d=h.races[b],e=a.classList.contains("raceContainer--school"),c=d.positionsAvailable===d.results.length,g=c||d.pollsTotal===d.pollsReporting,b='<figcaption class="card-body py-2" role="presentation"><h2 class="card-title text-center mb-0 '+(e?"h6":
"h5")+'" id="'+f+'_label"'+("cspgno"===b||"cscno"===b?' lang="fr"':"")+">"+d.raceTitle+"</h2></figcaption>",b=d.isDown?b+'<div class="card-body" role="alert"><div class="alert alert-warning text-center"><strong>Results Unavailable</strong><br />Please stand by.</div></div>':b+('<table class="table table-sm table-hover mb-0" aria-labelledby="'+f+'_label" aria-describedby="'+f+'_polls"><thead><th>Candidate</th><th class="text-right">Votes</th></thead><tbody>'+d.results.reduce(function(a,b,f){return a+
"<tr"+(c||g&&f<d.positionsAvailable?' class="table-success"':"")+"><td>"+b.candidate+'</td><td class="text-right">'+(c?"<em>Acclaimed</em>":b.votes)+"</td></tr>"},"")+"</tbody></table>"+(c?"":'<div class="card-footer py-1 text-center" id="'+f+'_polls"><small class="text-secondary">'+d.pollsReporting+" of "+d.pollsTotal+" polls reporting</small></div>"));a.innerHTML=b},b=function(){$.get("resultsJSON-static.json",{},"json").done(function(a){h=a;document.getElementById("lastUpdated").innerHTML="Last Updated<br />"+
h.lastUpdated+(g?'<br /><em class="text-muted">(Refreshing automatically)</em>':"");var b=document.getElementById("progress-bar--votersHeardFrom");b.style.width=(a.votersHeardFrom/a.votersTotal*100).toString()+"%";b.setAttribute("aria-valuenow",a.votersHeardFrom);b.setAttribute("aria-valuemax",a.votersTotal);document.getElementById("progress--votersHeardFrom").innerText=a.votersHeardFrom;document.getElementById("progress--votersTotal").innerText=a.votersTotal;var c=a.races.mayor.pollsReporting+a.races.ward1.pollsReporting+
a.races.ward2.pollsReporting+a.races.ward3.pollsReporting+a.races.ward4.pollsReporting+a.races.ward5.pollsReporting+a.races.adsb_ward2.pollsReporting+a.races.adsb_ward3.pollsReporting+a.races.adsb_ward4.pollsReporting+a.races.adsb_ward5.pollsReporting+a.races.adsb_unorganized.pollsReporting+a.races.hscdsb.pollsReporting+a.races.cspgno.pollsReporting;a=a.races.mayor.pollsTotal+a.races.ward1.pollsTotal+a.races.ward2.pollsTotal+a.races.ward3.pollsTotal+a.races.ward4.pollsTotal+a.races.ward5.pollsTotal+
a.races.adsb_ward2.pollsTotal+a.races.adsb_ward3.pollsTotal+a.races.adsb_ward4.pollsTotal+a.races.adsb_ward5.pollsTotal+a.races.adsb_unorganized.pollsTotal+a.races.hscdsb.pollsTotal+a.races.cspgno.pollsTotal;b=document.getElementById("progress-bar--pollsReporting_sum");b.style.width=(c/a*100).toString()+"%";b.setAttribute("aria-valuenow",c);b.setAttribute("aria-valuemax",a);for(b=0;b<m.length;b+=1)q(m[b])}).fail(function(){try{window.alert("An error occurred retrieving the results.")}catch(a){}})};
document.getElementById("siteContainer").style.display="block";b();g&&window.setInterval(b,61E3);var k=document.getElementById("tabsContainer--toggleBtn"),e=document.getElementById("tabsContainer"),n=function(){e.classList.add("d-none");k.setAttribute("aria-expanded","false")},p=function(){var a=e.getElementsByClassName("active")[0].getAttribute("data-next-tab");document.getElementById(a).click()};k.addEventListener("click",function(){e.classList.contains("d-none")?(e.classList.remove("d-none"),k.setAttribute("aria-expanded",
"true")):n()});$("a[data-toggle='tab']",e).on("shown.bs.tab",n);for(var c=document.getElementsByClassName("tabsContainer--prevBtn"),b=0;b<c.length;b+=1)c[b].addEventListener("click",function(){var a=e.getElementsByClassName("active")[0].id;e.querySelector("a[data-next-tab='"+a+"']").click()});c=document.getElementsByClassName("tabsContainer--nextBtn");for(b=0;b<c.length;b+=1)c[b].addEventListener("click",p);var r=document.getElementById("option-autoTab");window.setInterval(function(){r.checked&&p()},
45E3)});
